---
title: "SENSORS and ACTUATORS 6.9"
emoji: "👀"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [OpticalSensor, Laser, Camera]
published: false
---

## レーザー (Laser)
- Light Amplification by Stimulated Emission of Radiationの略
    - 誘導放出による光増幅放射
    - 結晶体に励起光を照射するとレーザー光が得られる
    - 励起状態の電子が，低いエネルギーに準位にうつるときに，エネルギーを電磁波として放射
    - 励起状態の原子に光を入射すると，入射光と同じ向きにエネルギーが2倍になるように増幅
    - ミラーで折り返し誘導放出を繰り返す事により出力を高める
- 紫外線，可視光，または赤外線の電磁放射線を生成
- 電磁放射線は単周波，同位相である
- 様々な原子や分子の振動を利用して生成
- 光ファイバで使われる他，センシングやゲージングにも使用される
- ヘリウムネオンレーザーや半導体レーザーは，光センサの用途で使われる

## 光ファイバセンサ
- 光を運ぶことのできるガラス繊維の束（通常は数百本）で構成される
- 直径は，数µmから0.01mm程度
- 間接型光ファイバセンサ
    - 光ファイバがセンサ光を伝送する媒体としてのみ機能する
    - 検出素子自体は光ファイバで構成されていない
    - 位置センサ，近接センサ，触覚センサなどに利用
- 直接型光ファイバセンサ
    - 光ファイバ自体がセンシング要素として機能する
    - 被検知媒体の状態が変化すると，光ファイバの光伝播特性も変化し（例えば，力を加えた時に直線状の線維が微小に曲がることによって），状態の変化を測定することができる
    - 光ファイバジャイロスコープ，光ファイバハイドロフォン，マイクロスケールの変位・力センサ

[レーザマーカ技術のご紹介 - レーザの原理](https://www3.panasonic.biz/ac/j/fasys/special/tech_lasermarker/principle_of_laser/index.jsp)
[レーザの基礎知識](https://www.laserfront.jp/learning/basic1.html)
[YAGレーザー](http://www.obara.co.jp/jp/product/laser/yag.html)
[光ファイバーが速い理由とその仕組み・構造・材質について解説](https://simpc.jp/rikatech/about-optical-fiber/)
[基礎編＜その２＞](http://www.phosc.jp/cms/article/000029.html)

# 6.9.1 Fiber-Optic Postion Sensor
- 間接型光ファイバセンサ
- 近接センサ・位置センサに利用
- 光ファイバの束は，送信用と受信用に分けられる
- 光源からの光が位置を測定したい対象物に向けて伝送される
- 光検出器で受光される光の強度は，対象物の位置に依存
- $x=0$の場合，送信バンドルが完全に遮断され，受光器で検出される光の強度はゼロになる
- $x$が大きくすると，受信バンドルの先端で反射する光が多くなるため，受信光の強度が大きくなる
- $x$はある値でピークに達し，$x$をそれ以上にすると，受信バンドルの外側で反射する光が増え，受信強度が低下する

[光ファイバー方式非接触変位計](https://www.unipulse.tokyo/product/pm-e/)
[ファイバセンサ 技術解説](https://www.fa.omron.co.jp/data_pdf/commentary/fibersensor_tg_j_1_2.pdf)

# 6.9.2 Laser Interfermoeter
- 間接型光ファイバセンサ
- 微小な変位を正確に測定する
    - 対象物との距離ではなく凹凸などの変位を測定
    - 位相差を用いるため，距離が大きいと測れない
    - 干渉縞の明暗の幅から位相差を測定
    - レンズやスリットを用いて干渉させる（波を重ね合わせる）
    - 干渉縞の移動方向から，微小な凹凸を計測
- レーザーの送信と受信に同じ光ファイバが用いられる
- ビームスプリッタAを使用して，光の一部を直接光ファイバに反射させ，他の部分は対象物に到達し，対象物に取り付けられた反射板を使用して光ファイバに反射させる
- 光ファイバを通って戻ってきた光の一部はビームスプリッタを超えずに，他の部分はビームスプリッタAと対象物間の距離の二倍を通手移動する
- ビームスプリッタBを通った後，光センサで光路差による位相差を計測
- 電気的・磁気的ノイズに強く，爆発性・高温・腐食性などの危険な環境下でも安全に動作する
- 非接触のため，機械的な付加や摩耗の問題がない
- 光源の強度の変化に直接影響されるため敏感
- 温度，汚れ，水分，煙などの周囲の条件に依存（温度は補正可能）

# 6.9.3 Fiber-Optic Gyroscope
- 直接型光ファイバセンサ
- 位相差や周波数差から角速度を算出
- 光ファイバジャイロは円筒に光ファイバをコイル状に巻きつける
- リングレーザジャイロは円形である必要はない
- レーザー光を時計回り・反時計回りにそれぞれ伝送
- 円筒の回転方向に進むレーザー光は，逆回転のレーザー光よりも高い周波数を持つ
    - 光路長が増加すると周波数も増加
    - 光路長が減少すると周波数も減少
    - 光速度一定のため光路が運動しているとき，光路長が変化（特殊相対性理論）
- 回転体に巻きつける光ファイバの長さは100mから1km程度

[ジャイロセンサとは？](https://mems.tamagawa-seiki.com/tec_info/)
[相対性理論について　その5](http://www4.osk.3web.ne.jp/~kasumitu/relativity5.pdf)
[リングレーザジャイロ](https://www.jstage.jst.go.jp/article/jjspe1986/54/2/54_2_289/_pdf)
[ヘテロダイン干渉計とは？](http://www.ppl.eng.osaka-u.ac.jp/sarubeta/interfero.html)

# 6.9.4 Laser Doppler Interferometer
- 速度の正確な測定に使用
- 変位は速度を（デジタル）積分して求める
- ドップラー効果と光波の干渉という二つの現象を利用
    - 光源が受信器に向かって移動すると周波数が上がったようにみえ，遠ざかると周波数が下がったようにみえる現象
- 対象物の速度に比例して周波数が増加
- 合成波の振動数が小さい方が振幅に相当
    - 明暗線の間隔を数える
    - 明暗の時間変化を計測する

# 6.9.5 Light Sensor
- 半導体ベースの光センサ
- 光の強度を表す電気信号が得られるように増幅・フィルタリング

## 6.9.5.1 Photoresistor
- 光の強さが増すにつれて電気抵抗が減少
- 暗い場所ではMΩから，明るい場所では100Ω以下に変化
- 硫化カドミウム (CdS) やセレン化カドミウム (CdSe) などの光導電性結晶材料を二つの電極で挟み込んで形成
- 硫化鉛 (PdS) やセレン化鉛 (PdSe) は赤外フォトレジスタに使用される
- フォトセルの中にはフォトレジスタとして機能するものも存在（光導電セル）

## 6.9.5.2 Photodiode
- 光に反応して電子-ホール対を生成する半導体材料のpn結合
- 光の入射に応じて，接合部に十分な電位を発生させる
- 逆電流を使用するため逆バイアスで使用
- 電流は入射する光の強さに比例
- 出力電流は数分の1ミリアンペアと小さいので，増幅が必要となる場合も
- シリコン，ゲルマニウム，硫化カドミウム，セレン化カドミウムなどの半導体材料が用いられる

## 6.9.5.3 Phototransistor
- フォトダイダイオードと増幅回路を一体化したもの
- フォトダイオードの出力がベース電流
- ベース端子をフローティングしても使用できる
- 発光ダイオードと組み合わせて入出力を電気的に分離するフォトカプラを作る
- ゲルマニウムやシリコンなどの半導体材料が使われる

[光センサ：フォトダイオードとフォトトランジスタ](https://techweb.rohm.co.jp/iot/knowledge/iot05/s-iot05/01-s-iot05/5187)
[フォトトランジスタとは？使い方と動作原理](https://analogista.jp/photo-transistor/)

## 6.9.5.4 Photo-FET
- ゲートに光が入射すると，ソース・ドレイン間に電流が流れる
    - 光発電素子 (PVD) によって電位が発生し，ゲートに電圧を印加する
    - フォトセルでフォトFETのゲートに電圧を印加する
- 光の強さに応じて電流が流れる
- チャネルと呼ばれるn型の半導体素子（例えばホウ素を添加したシリコン）
    - n型素子の上に，小さいp型素子が取り付けられている
    - p型素子のリードがゲート (G) となる
    - ドレイン (D) とソース (S) はチャネル上の二本のリード
- 電界効果トランジスタ (FET)
    - ゲート電極に電圧を加える
    - ソース・ドレイン電極間の電流を制御する
    - トランジスタと異なり，ゲートに電流ではなく電圧を加える
    - 電圧に比例して，電流が増加する
    - スイッチングに用いられる
- フォトカプラは発光ダイオードでフォトトランジスタを照らす


[トランジスタとFETの使い分け](https://ana-dig.com/transistor_fet/)
[フォトカプラと光MOS FET（フォトMOS FET,SSR）との違い](https://www.renesas.com/jp/ja/products/interface-connectivity/optoelectronics/differences-between-photocouplers-and-optical-coupled-mosfets)
[光MOS FETの構造と特徴](https://www.renesas.com/jp/ja/products/interface-connectivity/optoelectronics/solid-state-relay-optical-coupled-mosfet-structure-and-features)

## 6.9.5.5 Photocell
- センサとしてではなく，電気の供給減として使用される
- 太陽光電池が一般的に普及
- 単結晶シリコン，多結晶シリコン，硫化カドミウムなどの材料で作られた半導体接合素子
- 典型的な出力は表面積10 $\rm{mW/cm^2}$，電位は1.0V

## 6.9.5.6 Charge-Coupled Device
- デジタルカメラの撮影素子として利用される
- 画素数分のフォトダイオードがシリコン基板上に配列
- シリコンウエハを酸化させ，表面にSiO2層を形成
    - シリコンウエハは薄い円盤状の板で，内部に回路を集積させる
    - 酸化膜上に金属電極を蒸着し，CCDの出力端子を接続する
- CCDに光が当たると，基盤であるシリコンウエハ内に電子が発生
    - 電荷パケットは被写体の画像の1画素に相当
    - ポテンシャル井戸に電子が蓄積される
    - 特定の電極に外部電位を印加すると，その電極の下にポテンシャル井戸ができる
- 電荷パケットを出力回路に移動させる
    - パルス状の外部電圧を用いて電極に順次通電
    - パルスの速度は10MHz以上になることも
- 面の面積が数センチ四方の一般的なCCD素子では，576 $\times$ 485画素，より大きな素子では4096 $\times$ 4096画素も検出可能
- CID (Charge Injection Device) はコンデンサのペアが配列状に配置されている
    - 各コンデンサペアには電圧パルスで直接アドレスを設定可能
    - アドレスを設定すると少数キャリアが基盤に注入され，対応する信号が基盤から取り出される
    - CIDはCCDに比べ静電容量が大きいため，信号レベルが大幅に小さくなる
- CCDとCMOSは画像データの読み出し方式が異なる
    - CCDはバケツリレー方式で読み出し部に転送し，増幅する
    - CMOSは各受光素子にスイッチと増幅器を利用して，順次読み出す
    - CMOSの方が安価

[CCD（撮像素子）の仕組み](https://av.jpn.support.panasonic.com/support/dsc/knowhow/knowhow27.html)
[イメージセンサの基礎](http://www.ic.is.tohoku.ac.jp/~swk/lecture/ic2005/kagami_ic20050419.pdf)
[CCDの原理と透過型電子顕微鏡への応用](http://microscopy.or.jp/archive/magazine/45_4/pdf/45-4-257.pdf)

# 6.9.6 Image Sensors
- 撮像素子がセンサ，画像がセンサデータ
- 撮像素子には，光学式，熱式，赤外線式，X線式，紫外線式，音響式，超音波式などの種類がある

## 6.9.6.1 Image Processing and Computer Vision
- 画像処理により，エッジ，輪郭，面積などの幾何学的情報が得られる
- コンピュータビジョンは，画像処理によって得られた情報を用いて，物体認識，パターン認識，分類，抽象化，知識ベースの意思決定などを行う
    - 物体認識（検出）は画像内の物体の位置とカテゴリを予測
    - パターン認識は画像データから文字認識や指紋認識
    - 画像内の探索サイズを変えながら，事前に用意していた画像と比較
    - テンプレートマッチング，画像ベクトルの相関
- 現在では画像をそのまま用いるディープラーニングも用いられている

[物体検出についての歴史まとめ(1)](https://qiita.com/mshinoda88/items/9770ee671ea27f2c81a9)

## 6.9.6.2 Image-Based Sensory System
- 画像ベースの感覚システム
    - カメラ，DAQシステム，コンピュータ及び関連ソフトウェア
- DAQシステム（画像入力ボード，フレームグラバ）
    - 主に工業用のカメラなどに使用
    - 高速かつ高解像度の画像の読み込みに対応
    - DMA転送方式（ハードウェアを使ってCPUを介さずに直接メモリにアクセス）により実現
    - FIFOにより，読み込みと転送を並列で行う
    - 複数カメラから，非同期同時取り込み可能
    - ソフトウェア制御でのタイミング制御ロジック（カメラトリガ）
- 光源なども必要

[画像入力ボードとは？設定の勘所，CC信号とは？](https://imagingsolution.net/imaging/machinevision/frame_grabber_hint/)
[DMA対応と言われたら（1）](https://www.uquest.co.jp/embedded/learning/lecture15-1.html)
[カメラリンク用画像入力ボード HST Pleiad CL4e](https://www.ipros.jp/product/detail/347236005)
[GINGA++M2 / GINGA++M4](https://linx.jp/product/ginga/m2_m4.html)

## 6.9.6.3 Camera
- イメージセンサにはCCDやCMOSが一般的に用いられている
- CMOSは，ICの量産工程と同じプロセスを採用
    - 消費電力が少なく，安価
- CMOSは出力がデジタル
    - 画素に直接アクセス可能
- CMOSはトランジスタのばらつきがあるためノイズがのる
    - CCDの方がCMOSよりも高品質
- 一列ずつ下段から上段に向かって順次読み取る
- 各CCDセルからのアナログ信号は増幅された後デジタル化される
- 画素のビット数は，色の階調を表す

## 6.9.6.4 Image Frame Acquisition
- 画像を高速で取得できる（例えば200MB/s）
- USBカメラ
    - カメラのストレージからコンピュータのストレージに画像をコピー
    - ファイル転送プロセスとして行われるため画像データの転送にやや時間がかかる

## 6.9.6.5 Color Images
- グレースケール画像は一枚の画像フレームで表現可能
- カラー画像を表現するためには，三つの画像フレームが必要
    - RGBモデル
    - CMYモデル
- RGBモデルをHSIモデルに変換する解析関係
    - 色相（H），彩度（S），明度（I）
    - HSV色空間と同じ（I=V）
    - 色検出をするときなどに利用
    - カラーフィルタでは色の補完計算時に利用
- 輝度に敏感な波長である緑
- 色差に敏感な波長である赤と青
- 人の目も緑色の波長に敏感であり，緑のフィルタを多く確保するほうが，視覚的な解像度を高めることができる

[べイヤーフィルター](https://ja.wikipedia.org/wiki/%E3%83%99%E3%82%A4%E3%83%A4%E3%83%BC%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC)
[Demosaicing](https://en.wikipedia.org/wiki/Demosaicing)
[カメラのセンサーとべイヤー配列を理解する](https://vook.vc/n/256)

## 6.9.6.6 Image Processing
- アナログ画像処理
    - フィルタリング，増幅
- デジタル画像処理
    - エッジ検出（近傍との差分）
    - 二値化（閾値で白黒画像を作る）
    - セグメンテーション
        - 細分化して幾何学的な形状や物体を検出
        - 面積やサイズなどを推定
        - ピクセルあたりの面積が分かっていれば，二値化してピクセル数を数える
    - モルフォロジー演算（収縮，膨張などでフィルタリング）
    - 減算処理（中央値フィルタなどで背景を減算）
    - テンプレートマッチング
    - 圧縮

[モルフォロジー変換](http://labs.eecs.tottori-u.ac.jp/sd/Member/oyamada/OpenCV/html/py_tutorials/py_imgproc/py_morphological_ops/py_morphological_ops.html)
[Statistical Modeling of Complex Backgrounds for Foreground Object Detection](https://sci-hub.se/10.1109/tip.2004.836169)

## 6.9.6.7 Some Applications
- 切断，把持，操作などのために対象物の位置を測定
- 製品の品質評価ために，サイズ，形状，重量，色，質感，硬さなどの推定
- 対象物の位置を測定し，操作物との位置と比較する
    - ロボットのエンドエフェクタが対象物に到達する
    - 移動ロボットや自動運転のナビゲーション
- 物体認識
    - 安全性，自動処理のため
- 遠隔医療で患者を診察するために用いる